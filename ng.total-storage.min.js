/**
 * TotalStorage
 *
 * Copyright (c) 2012 Jared Novack & Upstatement (upstatement.com)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Total Storage is the conceptual the love child of jStorage by Andris Reinman, 
 * and Cookie by Klaus Hartl -- though this is not connected to either project.
 *
 * Ported to AngularJS by Aditya V. Mukherjee // http://adityamukherjee.com/
 *
 * @name totalStorage
 * @cat Plugins/Cookie
 * @author Jared Novack/jared@upstatement.com
 * @author Aditya V. Mukherjee/aditya@adityamukherjee.com
 * @version 0.1
 */
 
angular.module("totalStorage",[]).factory("totalStorage",function(){var e,t;if("localStorage"in window){try{t=typeof window.localStorage==="undefined"?undefined:window.localStorage;if(typeof t=="undefined"||typeof window.JSON=="undefined"){e=false}else{e=true}}catch(n){e=false}}var r=function(e,t,n){return r.impl.init(e,t)};r.setItem=function(e,t){return r.impl.setItem(e,t)};r.getItem=function(e){return r.impl.getItem(e)};r.getAll=function(){return r.impl.getAll()};r.deleteItem=function(e){return r.impl.deleteItem(e)};r.impl={init:function(e,t){if(typeof t!="undefined"){return this.setItem(e,t)}else{return this.getItem(e)}},setItem:function(n,r){if(!e){try{$.cookie(n,r);return r}catch(i){console.log("Local Storage not supported by this browser. Install the cookie plugin on your site to take advantage of the same functionality. You can get it at https://github.com/carhartl/jquery-cookie")}}var s=JSON.stringify(r);t.setItem(n,s);return this.parseResult(s)},getItem:function(n){if(!e){try{return this.parseResult($.cookie(n))}catch(r){return null}}var i=t.getItem(n);return this.parseResult(i)},deleteItem:function(n){if(!e){try{$.cookie(n,null);return true}catch(r){return false}}t.removeItem(n);return true},getAll:function(){var n=[];if(!e){try{var r=document.cookie.split(";");for(var i=0;i<r.length;i++){var s=r[i].split("=");var o=s[0];n.push({key:o,value:this.parseResult($.cookie(o))})}}catch(u){return null}}else{for(var a in t){if(a.length){n.push({key:a,value:this.parseResult(t.getItem(a))})}}}return n},parseResult:function(e){var t;try{t=JSON.parse(e);if(typeof t=="undefined"){t=e}if(t=="true"){t=true}if(t=="false"){t=false}if(parseFloat(t)==t&&typeof t!="object"){t=parseFloat(t)}}catch(n){t=e}return t}};return r})