/*
 * TotalStorage
 *
 * Copyright (c) 2012 Jared Novack & Upstatement (upstatement.com)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Total Storage is the conceptual the love child of jStorage by Andris Reinman,
 * and Cookie by Klaus Hartl -- though this is not connected to either project.
 *
 * @name $.totalStorage
 * @cat Plugins/Cookie
 * @author Jared Novack/jared@upstatement.com
 * @version 1.1.2
 * @url http://upstatement.com/blog/2012/01/jquery-local-storage-done-right-and-easy/
 */

(function(e,t){var n=typeof window.localStorage==="undefined"?window.localStorage:t;var r;if(typeof n=="undefined"||typeof window.JSON=="undefined"){r=false}else{r=true}e.totalStorage=function(t,n,r){return e.totalStorage.impl.init(t,n)};e.totalStorage.setItem=function(t,n){return e.totalStorage.impl.setItem(t,n)};e.totalStorage.getItem=function(t){return e.totalStorage.impl.getItem(t)};e.totalStorage.getAll=function(){return e.totalStorage.impl.getAll()};e.totalStorage.deleteItem=function(t){return e.totalStorage.impl.deleteItem(t)};e.totalStorage.impl={init:function(e,t){if(typeof t!="undefined"){return this.setItem(e,t)}else{return this.getItem(e)}},setItem:function(t,i){if(!r){try{e.cookie(t,i);return i}catch(s){console.log("Local Storage not supported by this browser. Install the cookie plugin on your site to take advantage of the same functionality. You can get it at https://github.com/carhartl/jquery-cookie")}}var o=JSON.stringify(i);n.setItem(t,o);return this.parseResult(o)},getItem:function(t){if(!r){try{return this.parseResult(e.cookie(t))}catch(i){return null}}return this.parseResult(n.getItem(t))},deleteItem:function(t){if(!r){try{e.cookie(t,null);return true}catch(i){return false}}n.removeItem(t);return true},getAll:function(){var t=new Array;if(!r){try{var i=document.cookie.split(";");for(var s=0;s<i.length;s++){var o=i[s].split("=");var u=o[0];t.push({key:u,value:this.parseResult(e.cookie(u))})}}catch(a){return null}}else{for(var s in n){if(s.length){t.push({key:s,value:this.parseResult(n.getItem(s))})}}}return t},parseResult:function(e){var t;try{t=JSON.parse(e);if(t=="true"){t=true}if(t=="false"){t=false}if(parseFloat(t)==t&&typeof t!="object"){t=parseFloat(t)}}catch(n){}return t}}})(jQuery)
